#!/usr/bin/env python

import sys
import os

import PyQt4
import PyQt4.QtCore as QtCore
import PyQt4.QtGui as QtGui

import ibeatles.interfaces.ui_mainWindow

from ibeatles.step1.load_data_handler import LoadDataHandler


class MainWindow(PyQt4.QtGui.QMainWindow, ibeatles.interfaces.ui_mainWindow.Ui_MainWindow):
    """ Main FastGR window
    """

    DEBUGGING = True

    def __init__(self):
        """ Initialization
        Parameters
        ----------
        """
        # Base class
        QtGui.QMainWindow.__init__(self)

        # Initialize the UI widgets
        self.ui = ibeatles.interfaces.ui_mainWindow.Ui_MainWindow()
        self.ui.setupUi(self)

        self.setup()
        
    def setup(self):
        if self.DEBUGGING:
            current_folder = '/Volumes/My Book Thunderbolt Duo/iBeatles/'
        else:
            current_folder = os.getcwd()

        self.sample_folder = current_folder
        self.ob_folder = current_folder
        self.normalized_folder = current_folder
        self.time_spectra_folder = current_folder
    
        self.load_metadata = {'sample': {'title': "Select folder or list of files",
                                         'folder': current_folder},
                              'ob': {'title': 'Select folder or list of files',
                                     'folder': current_folder},
                              'normalized': {'title': 'Select folder or list of files',
                                             'folder': current_folder},
                              'time_spectra': {'title': 'Select file',
                                               'folder': current_folder}}
        


    #TAB 1: Load Data Tab
    
    def sample_import_button_clicked(self):
        o_load = LoadDataHandler(parent = self)
        o_load.load(type = 'sample')

    def sample_list_selection_changed(self):
        print("sample list selection changed")

    def open_beam_import_button_clicked(self):
        print("import open beam")

    def open_beam_list_selection_changed(self):
        print("open beam selection changed")

    def time_spectra_import_button_clicked(self):
        print("time specrtra")


        


def main():
    app = PyQt4.QtGui.QApplication(sys.argv)
    #app.setWindowIcon(PyQt4.QtGui.QIcon(":/icon.png"))
    application = MainWindow()
    application.show()
    app.exec_()

if __name__ == '__main__':
    main()
